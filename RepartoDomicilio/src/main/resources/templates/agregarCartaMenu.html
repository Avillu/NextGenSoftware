<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agregar Carta y Items</title>
</head>
<body>
<h1 th:text="'Agregar Carta para ' + ${restaurante.nombre}"></h1>
<form th:action="@{/restaurante/{cif}/agregarCartaMenu(cif=${restaurante.cif})}" method="post">

  <input type="hidden" th:value="${restaurante.id}" name="restauranteId">


  <div>
    <label for="nombreCarta">Nombre de la carta:</label>
    <input type="text" id="nombreCarta" name="nombreCarta" required>
  </div>

  <div id="itemsContainer">
    <h3>Agregar Ítems</h3>
    <div class="itemMenu" id="itemMenu_0">
      <label for="itemNombre_0">Nombre del Ítem:</label>
      <input type="text" id="itemNombre_0" name="items[0].nombre" required>

      <label for="itemPrecio_0">Precio:</label>
      <input type="number" step="0.01" id="itemPrecio_0" name="items[0].precio" required>

      <label for="itemTipo_0">Tipo:</label>
      <select id="itemTipo_0" name="items[0].tipo" required>
        <option value="COMIDA">Comida</option>
        <option value="BEBIDA">Bebida</option>
        <option value="POSTRE">Postre</option>
      </select>
    </div>
  </div>

  <button type="button" onclick="addNewItem()">Agregar otro ítem</button>

  <button type="submit">Guardar Carta e Ítems</button>
</form>

<script>
  let itemCount = 1;

  function addNewItem() {
    // Crear el contenedor para el nuevo ítem
    let newItem = document.createElement("div");
    newItem.classList.add("itemMenu");
    newItem.id = "itemMenu_" + itemCount; // ID único para el nuevo ítem

    // Crear los campos del nuevo ítem
    newItem.innerHTML = `
            <label for="itemNombre_${itemCount}">Nombre del Ítem:</label>
            <input type="text" id="itemNombre_${itemCount}" name="items[${itemCount}].nombre" required>

            <label for="itemPrecio_${itemCount}">Precio:</label>
            <input type="number" step="0.01" id="itemPrecio_${itemCount}" name="items[${itemCount}].precio" required>

            <label for="itemTipo_${itemCount}">Tipo:</label>
            <select id="itemTipo_${itemCount}" name="items[${itemCount}].tipo" required>
                <option value="COMIDA">Comida</option>
                <option value="BEBIDA">Bebida</option>
                <option value="POSTRE">Postre</option>
            </select>
        `;

    // Añadir el nuevo ítem al contenedor de ítems
    document.getElementById("itemsContainer").appendChild(newItem);

    // Incrementar el contador para el siguiente ítem
    itemCount++;
  }
</script>
</body>
</html>
